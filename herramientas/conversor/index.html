<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor - Bomberos Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #2c3e50;
        }

        .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .breadcrumb {
            font-size: 0.9em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
        }

        .header h1 {
            font-size: 2em;
            font-weight: bold;
        }

        .main-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .converter-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }

        .converter-title {
            font-size: 1.5em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            display: block;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-size: 1.3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .input-field:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .select-field {
            width: 100%;
            padding: 15px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            background: white;
            cursor: pointer;
        }

        .select-field:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .arrow-section {
            text-align: center;
            margin: 20px 0;
        }

        .arrow {
            font-size: 2em;
            color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
            padding: 10px 20px;
            border-radius: 50%;
            display: inline-block;
        }

        .result-section {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .result-label {
            font-size: 1.1em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .result-value {
            font-size: 2.5em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .clear-btn {
            width: 100%;
            padding: 15px;
            background: #95a5a6;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-btn:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .quick-reference {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .reference-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
        }

        .reference-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9em;
            text-align: center;
        }

        .reference-item strong {
            display: block;
            color: #e74c3c;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 20px 15px;
            }

            .converter-card {
                padding: 20px;
            }

            .result-value {
                font-size: 2em;
            }

            .input-field, .select-field {
                padding: 12px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="breadcrumb">
            <a href="../../index.html">← Inicio</a> > Conversor
        </div>
        <h1>Conversor Universal</h1>
        <p>Selecciona unidades y convierte instantáneamente</p>
    </header>

    <div class="main-container">
        <!-- Conversor Principal -->
        <div class="converter-card">
            <div class="converter-title">Conversor por Categorías</div>
            
            <!-- Selector de Categoría -->
            <div class="input-section">
                <label class="input-label">Tipo de conversión:</label>
                <select class="select-field" id="category" onchange="updateUnits()">
                    <option value="pressure">Presión (bar, PSI, kPa, mH2O)</option>
                    <option value="distance">Distancia (metros, pies, pulgadas, cm, yardas)</option>
                    <option value="area">Área (m², ft², hectáreas)</option>
                    <option value="volume">Volumen (litros, galones, m³)</option>
                    <option value="weight">Peso (kg, libras, gramos)</option>
                    <option value="force">Fuerza (Newton, kgf, lbf)</option>
                    <option value="temperature">Temperatura (°C, °F, K)</option>
                    <option value="flow">Caudal (LPM, GPM, L/s, m³/s)</option>
                    <option value="oxygen">Calculador de oxígeno</option>
                </select>
            </div>
            
            <div class="input-section" id="normalConverter">
                <label class="input-label">Valor a convertir:</label>
                <input type="number" class="input-field" id="inputValue" placeholder="Ingresa el valor" oninput="convertValue()">
                
                <label class="input-label">Desde:</label>
                <select class="select-field" id="fromUnit" onchange="convertValue()">
                </select>
            </div>

            <div class="arrow-section" id="arrowSection">
                <div class="arrow">↓</div>
            </div>

            <div class="input-section" id="normalToUnit">
                <label class="input-label">Hacia:</label>
                <select class="select-field" id="toUnit" onchange="convertValue()">
                </select>
            </div>

            <!-- Calculador de Oxígeno -->
            <div class="input-section" id="oxygenCalculator" style="display: none;">
                <label class="input-label">Presión del balón:</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="number" class="input-field" id="oxygenPressure" placeholder="200" oninput="calculateOxygen()" style="flex: 2;">
                    <select class="select-field" id="pressureUnit" onchange="calculateOxygen()" style="flex: 1;">
                        <option value="bar">bar</option>
                        <option value="psi">PSI</option>
                    </select>
                </div>
                
                <label class="input-label">Tamaño del balón:</label>
                <select class="select-field" id="oxygenCapacity" onchange="calculateOxygen()">
                    <option value="0.3">Tamaño A (0.3 L - 85 L gas)</option>
                    <option value="0.4">Tamaño B (0.4 L - 110 L gas)</option>
                    <option value="0.68">Tamaño C (0.68 L - 195 L gas)</option>
                    <option value="1.4">Tamaño D (1.4 L - 400 L gas)</option>
                    <option value="3.3" selected>Tamaño E (3.3 L - 950 L gas)</option>
                    <option value="6.9">Tamaño G (6.9 L - 2000 L gas)</option>
                    <option value="13.8">Tamaño H (13.8 L - 4000 L gas)</option>
                    <option value="2.3">Tamaño M (2.3 L - 660 L gas)</option>
                    <option value="1.0">Balón 1L portátil</option>
                    <option value="2.0">Balón 2L portátil</option>
                    <option value="5.0">Balón 5L médico</option>
                    <option value="10.0">Balón 10L industrial</option>
                </select>
                
                <label class="input-label">Flujo de consumo (L/min):</label>
                <select class="select-field" id="oxygenFlow" onchange="calculateOxygen()">
                    <option value="2">2 L/min (reposo)</option>
                    <option value="4">4 L/min (actividad ligera)</option>
                    <option value="6" selected>6 L/min (actividad moderada)</option>
                    <option value="10">10 L/min (actividad intensa)</option>
                    <option value="15">15 L/min (emergencia máxima)</option>
                </select>
            </div>

            <div class="result-section">
                <div class="result-label">Resultado:</div>
                <div class="result-value" id="resultValue">--</div>
            </div>

            <button class="clear-btn" onclick="clearAll()">Limpiar Todo</button>
        </div>

        <!-- Referencia Rápida -->
        <div class="quick-reference">
            <div class="reference-title">Valores Comunes para Bomberos</div>
            <div class="reference-grid">
                <div class="reference-item">
                    <strong>SCBA</strong>
                    300 bar<br>
                    4,350 PSI
                </div>
                <div class="reference-item">
                    <strong>Bomba</strong>
                    10-15 bar<br>
                    145-218 PSI
                </div>
                <div class="reference-item">
                    <strong>Manguera 2½"</strong>
                    65 mm<br>
                    2.5 in
                </div>
                <div class="reference-item">
                    <strong>Manguera 1¾"</strong>
                    45 mm<br>
                    1.75 in
                </div>
                <div class="reference-item">
                    <strong>Tanque típico</strong>
                    4,000 L<br>
                    1,057 gal
                </div>
                <div class="reference-item">
                    <strong>Caudal ataque</strong>
                    400 LPM<br>
                    106 GPM
                </div>
            </div>
        </div>
    </div>

    <script>
        // Definición de unidades por categoría
        const unitCategories = {
            pressure: {
                units: {
                    'bar': 'BAR',
                    'psi': 'PSI', 
                    'kpa': 'kPa',
                    'atm': 'Atmósferas',
                    'mh2o': 'Metros de H2O',
                    'mmhg': 'mmHg'
                },
                conversions: {
                    bar: 1,
                    psi: 0.0689476,
                    kpa: 0.01,
                    atm: 1.01325,
                    mh2o: 0.0980665,
                    mmhg: 0.00133322
                }
            },
            distance: {
                units: {
                    'm': 'Metros',
                    'ft': 'Pies',
                    'in': 'Pulgadas',
                    'cm': 'Centímetros',
                    'mm': 'Milímetros',
                    'yd': 'Yardas'
                },
                conversions: {
                    m: 1,
                    ft: 0.3048,
                    in: 0.0254,
                    cm: 0.01,
                    mm: 0.001,
                    yd: 0.9144
                }
            },
            area: {
                units: {
                    'm2': 'Metros cuadrados (m²)',
                    'ft2': 'Pies cuadrados (ft²)',
                    'ha': 'Hectáreas',
                    'acres': 'Acres'
                },
                conversions: {
                    m2: 1,
                    ft2: 0.092903,
                    ha: 10000,
                    acres: 4046.86
                }
            },
            volume: {
                units: {
                    'l': 'Litros',
                    'gal': 'Galones US',
                    'm3': 'Metros cúbicos (m³)',
                    'ft3': 'Pies cúbicos (ft³)'
                },
                conversions: {
                    l: 1,
                    gal: 3.78541,
                    m3: 1000,
                    ft3: 28.3168
                }
            },
            weight: {
                units: {
                    'kg': 'Kilogramos',
                    'lb': 'Libras',
                    'g': 'Gramos',
                    'oz': 'Onzas'
                },
                conversions: {
                    kg: 1,
                    lb: 0.453592,
                    g: 0.001,
                    oz: 0.0283495
                }
            },
            force: {
                units: {
                    'n': 'Newton (N)',
                    'kgf': 'Kilogramo-fuerza (kgf)',
                    'lbf': 'Libra-fuerza (lbf)',
                    'dyn': 'Dina'
                },
                conversions: {
                    n: 1,
                    kgf: 9.80665,
                    lbf: 4.44822,
                    dyn: 0.00001
                }
            },
            temperature: {
                units: {
                    'c': 'Celsius (°C)',
                    'f': 'Fahrenheit (°F)',
                    'k': 'Kelvin (K)'
                },
                special: true
            },
            flow: {
                units: {
                    'lpm': 'Litros por minuto',
                    'gpm': 'Galones por minuto',
                    'lps': 'Litros por segundo',
                    'm3s': 'Metros cúbicos por segundo',
                    'm3h': 'Metros cúbicos por hora'
                },
                conversions: {
                    lpm: 1,
                    gpm: 3.78541,
                    lps: 60,
                    m3s: 60000,
                    m3h: 16.6667
                }
            },
            oxygen: {
                special: true,
                calculator: true
            }
        };

        function updateUnits() {
            const category = document.getElementById('category').value;
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');
            const normalConverter = document.getElementById('normalConverter');
            const normalToUnit = document.getElementById('normalToUnit');
            const arrowSection = document.getElementById('arrowSection');
            const oxygenCalculator = document.getElementById('oxygenCalculator');
            const resultElement = document.getElementById('resultValue');
            
            if (category === 'oxygen') {
                // Mostrar calculador de oxígeno
                normalConverter.style.display = 'none';
                normalToUnit.style.display = 'none';
                arrowSection.style.display = 'none';
                oxygenCalculator.style.display = 'block';
                resultElement.textContent = 'Ingresa los datos del balón';
                return;
            } else {
                // Mostrar conversor normal
                normalConverter.style.display = 'block';
                normalToUnit.style.display = 'block';
                arrowSection.style.display = 'block';
                oxygenCalculator.style.display = 'none';
            }
            
            // Limpiar opciones existentes
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            // Agregar nuevas opciones
            const categoryData = unitCategories[category];
            Object.entries(categoryData.units).forEach(([key, value]) => {
                const option1 = new Option(value, key);
                const option2 = new Option(value, key);
                fromSelect.add(option1);
                toSelect.add(option2);
            });
            
            // Seleccionar diferentes unidades por defecto
            if (fromSelect.options.length > 1) {
                toSelect.selectedIndex = 1;
            }
            
            // Limpiar resultado
            resultElement.textContent = '--';
            convertValue();
        }

        function calculateOxygen() {
            const pressureValue = parseFloat(document.getElementById('oxygenPressure').value);
            const pressureUnit = document.getElementById('pressureUnit').value;
            const capacity = parseFloat(document.getElementById('oxygenCapacity').value);
            const flow = parseFloat(document.getElementById('oxygenFlow').value);
            const resultElement = document.getElementById('resultValue');
            
            if (isNaN(pressureValue) || isNaN(capacity) || isNaN(flow)) {
                resultElement.textContent = 'Completa todos los datos';
                return;
            }
            
            if (pressureValue <= 0 || capacity <= 0 || flow <= 0) {
                resultElement.textContent = 'Valores deben ser positivos';
                return;
            }
            
            // Convertir presión a bar
            let pressureInBar;
            switch(pressureUnit) {
                case 'bar': pressureInBar = pressureValue; break;
                case 'psi': pressureInBar = pressureValue * 0.0689476; break;
                case 'kpa': pressureInBar = pressureValue * 0.01; break;
                case 'atm': pressureInBar = pressureValue * 1.01325; break;
                default: pressureInBar = pressureValue;
            }
            
            // Presión de reserva en bar (mínimo 20 bar)
            const pressureReserve = 20;
            const usablePressure = Math.max(0, pressureInBar - pressureReserve);
            
            if (usablePressure <= 0) {
                resultElement.textContent = 'Presión insuficiente';
                return;
            }
            
            // Volumen útil de oxígeno a presión atmosférica
            const usableVolume = capacity * usablePressure;
            
            // Tiempo en minutos
            const timeMinutes = usableVolume / flow;
            
            // Formatear resultado
            let result = '';
            if (timeMinutes >= 60) {
                const hours = Math.floor(timeMinutes / 60);
                const minutes = Math.round(timeMinutes % 60);
                result = `${hours}h ${minutes}min`;
            } else {
                result = `${Math.round(timeMinutes)} minutos`;
            }
            
            // Información adicional
            const totalVolume = capacity * pressureInBar;
            const reserveTime = (capacity * pressureReserve) / flow;
            
            resultElement.innerHTML = `
                <div style="font-size: 0.8em; margin-bottom: 10px;">
                    Autonomía: <strong>${result}</strong><br>
                    Volumen total: ${Math.round(totalVolume)} L<br>
                    Reserva: ${Math.round(reserveTime)} min<br>
                    Presión útil: ${Math.round(usablePressure)} bar
                </div>
            `;
        }

        function convertTemperature(value, fromUnit, toUnit) {
            // Convertir a Celsius primero
            let celsius;
            switch(fromUnit) {
                case 'c': celsius = value; break;
                case 'f': celsius = (value - 32) * 5/9; break;
                case 'k': celsius = value - 273.15; break;
            }
            
            // Convertir de Celsius a unidad destino
            switch(toUnit) {
                case 'c': return celsius;
                case 'f': return celsius * 9/5 + 32;
                case 'k': return celsius + 273.15;
            }
        }

        function convertValue() {
            const inputValue = parseFloat(document.getElementById('inputValue').value);
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const category = document.getElementById('category').value;
            const resultElement = document.getElementById('resultValue');
            
            if (isNaN(inputValue) || inputValue === '') {
                resultElement.textContent = '--';
                return;
            }
            
            if (fromUnit === toUnit) {
                resultElement.textContent = inputValue.toString();
                return;
            }
            
            let result;
            const categoryData = unitCategories[category];
            
            if (categoryData.special && category === 'temperature') {
                result = convertTemperature(inputValue, fromUnit, toUnit);
            } else {
                // Conversión estándar
                const fromFactor = categoryData.conversions[fromUnit];
                const toFactor = categoryData.conversions[toUnit];
                
                // Convertir a unidad base, luego a unidad destino
                const baseValue = inputValue * fromFactor;
                result = baseValue / toFactor;
            }
            
            // Formatear resultado
            let formattedResult;
            if (result >= 1000000) {
                formattedResult = result.toExponential(2);
            } else if (result >= 100) {
                formattedResult = result.toFixed(1);
            } else if (result >= 1) {
                formattedResult = result.toFixed(2);
            } else if (result >= 0.01) {
                formattedResult = result.toFixed(3);
            } else {
                formattedResult = result.toExponential(2);
            }
            
            resultElement.textContent = formattedResult;
        }

        function clearAll() {
            document.getElementById('inputValue').value = '';
            document.getElementById('resultValue').textContent = '--';
        }

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            updateUnits(); // Cargar unidades iniciales
            console.log('Conversor por categorías cargado');
        });
    </script>
</body>
</html>